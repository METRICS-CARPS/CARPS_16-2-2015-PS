---
title: "CARPS Reproducibility Report"
output:
  html_document:
    toc: true
    toc_float: true
editor_options: 
  chunk_output_type: console
---

[PILOT/COPILOT - TEXT IN SQUARE BRACKETS IS HERE FOR GUIDANCE. COPILOT PLEASE DELETE BEFORE KNITTING THE FINAL REPORT]

# Report Details

[PILOT/COPILOT ENTER RELEVANT REPORT DETAILS HERE]

```{r}
articleID <- 16-2-2015 # insert the article ID code here e.g., "10-3-2015_PS"
reportType <- 'pilot' # specify whether this is the 'pilot' report or 'final' report
pilotNames <- 'Emily Hembacher' # insert the pilot's name here e.g., "Tom Hardwicke".  If there are multiple cpilots enter both names in a character string e.g., "Tom Hardwicke, Bob Dylan"
copilotNames <- NA # # insert the co-pilot's name here e.g., "Michael Frank". If there are multiple co-pilots enter both names in a character string e.g., "Tom Hardwicke, Bob Dylan"
pilotTTC <- NA # insert the pilot's estimated time to complete (in minutes, fine to approximate) e.g., 120
copilotTTC <- NA # insert the co-pilot's estimated time to complete (in minutes, fine to approximate) e.g., 120
pilotStartDate <- '06/13/18' # insert the pilot's start date in US format e.g., as.Date("01/25/18", format = "%m/%d/%y")
copilotStartDate <- NA # insert the co-pilot's start date in US format e.g., as.Date("01/25/18", format = "%m/%d/%y")
completionDate <- NA # copilot insert the date of final report completion (after any necessary rounds of author assistance) in US format e.g., as.Date("01/25/18", format = "%m/%d/%y")
```

------

#### Methods summary: 

The authors attempted to replicate previous findings that conception risk is related to women's racial bias. Specifically, previous research had found that women who had a higher likelihood of becoming pregnant given the day in their menstrual cycle exhibited stronger racial biases favoring White men over Black men on a variety of measures. The authors of the present study attempted to replicate this in a high-powered design. In Study 1 (which we attempt to reproduce in this report), 867 women were recruited. Participants' current menstrual cycle day was used to estimate conception-risk. Participants' explicit racial biases were estimated from self-report measures and implicit racial bias were estimated from Implicit Association Tests. 

------

#### Target outcomes: 

We will attempt to reproduce all findings related to Study 1 in the quoted text:

> For all racial measures, higher scores represented pro-White bias. The mean score for implicit racial bias was 0.34 (SD = 0.43) in Study 1, 0.33 (SD = 0.42) in Study 2, 0.27 (SD = 0.41) in Study 3, and 0.18 (SD = 0.37) in Study 4. The mean score for explicit racial bias was 0.30 (SD = 1.09) in Study 1, 0.30 (SD = 1.05) in Study 2, 0.27 (SD = 0.83) in Study 3, and 0.53 (SD = 1.05) in Study 4. Mean rated warmth toward European Americans was 7.18 (SD = 2.07) in Study 1 and 7.15 (SD = 2.00) in Study 2, and mean rated warmth toward African Americans was 6.69 (SD = 2.06) in Study 1 and 6.78 (SD = 2.12) in Study 2. The mean score for explicit physicality stereotypes was 0.80 (SD = 0.83) in Study 3 and 0.81 (SD = 0.85) in Study 4, and the mean score for implicit physicality stereotypes was 0.26 (SD = 0.36) in Study 3 and 0.21 (SD = 0.38) in Study 4. As in Navarrete et al. (2009), we created composite bias scores in each study by standardizing and then averaging all racial-bias measures (warmth toward African Americans was subtracted from warmth toward European Americans to create a warmth difference score prior to standardizing). Mean conception risk was 0.03 (SD = 0.03) in Study 1, 0.03 (SD = 0.03) in Study 2, 0.04 (SD = 0.03) in Study 3, and 0.03 (SD = 0.03) in Study 4. Correlations were computed between conception risk and each race variable, including the composite score. To best match the existing literature, we computed correlations for White women only (see the Supplemental Material for additional analyses). Conception risk did not significantly correlate with any of the individual measures of racial bias (see Table S4 in the Supplemental Material) or with the composite score in Study 1, r = .00, 95% confidence interval (CI) = [−.09, .08]; Study 2, r = .00, 95% CI = [−.09, .08]; Study 3, r = .03, 95% CI = [−.17, .22]; or Study 4, r = .05, 95% CI = [−.11, .21]. (Hawkins, Fitzgerald & Nosek, 2014, p. 250)

------

[PILOT/COPILOT DO NOT CHANGE THE CODE IN THE CHUNK BELOW]  

```{r global_options, include=FALSE}
# sets up some formatting options for the R Markdown document
knitr::opts_chunk$set(echo=TRUE, warning=FALSE, message=FALSE)
```

# Step 1: Load packages and prepare report object

[PILOT/COPILOT Some useful packages are being loaded below. You can add any additional ones you might need too.]

```{r}
# load packages
library(tidyverse) # for data munging
library(knitr) # for kable table formating
library(haven) # import and export 'SPSS', 'Stata' and 'SAS' Files
library(readxl) # import excel files
library(CARPSreports) # custom report functions
```

[PILOT/COPILOT DO NOT MAKE CHANGES TO THE CODE CHUNK BELOW]

```{r}
# Prepare report object. This will be updated automatically by the reproCheck function each time values are compared
reportObject <- data.frame(dummyRow = TRUE, reportedValue = NA, obtainedValue = NA, valueType = NA, percentageError = NA, comparisonOutcome = NA, eyeballCheck = NA)
```

# Step 2: Load data

```{r}
#load full raw data. authors also included a pre-processed data file with excluded participants and standardized variables.
d <-read_excel('data/study1/Study_1_full.xls')
```

# Step 3: Tidy data

```{r}
#add variable for subject ID; otherwise data is already in tidy format
d$sid <- 1:length(d$session_status)
```

# Step 4: Run analysis

## Pre-processing

>Following criteria from Navarrete et al. (2009) and McDonald et al. (2011), we excluded women who: (a) reported contraceptive use, that they were currently pregnant or uncertain of current pregnancy status, as well as women whose current cycle was day 41 or higher or had a previous cycle of irregular length - less than 20 days or more than 40 days; or (b) women who reported infertility due to menopause or some other health reason, or if they reported that they were uncertain of reproductive status, preferred not to say, or they left the reproductive question blank. After these exclusions, Study 1 contained 867 women and Study 2 contained 878 women with a valid conception risk score. (Supplementary Materials for Hawkins, Fitzgerald, & Nosek (2014) p. 1)

```{r}

```

>As in Navarrete et al. (2009), we created composite bias scores in each study by standardizing and then averaging all racial-bias measures (warmth toward African Americans was subtracted from warmth toward European Americans to create a warmth difference score prior to standardizing).(Hawkins, Fitzgerald & Nosek, 2014, p. 250)
```{r}
#calculate zscores for all measures

#calculate warmth difference scores

#calculate composite score by averaging bias scores


```

## Descriptive statistics

The mean score for implicit racial bias was 0.34 (SD = 0.43) in Study 1
```{r}

```

The mean score for explicit racial bias was 0.30 (SD = 1.09) in Study 1
```{r}

```

Mean rated warmth toward European Americans was 7.18 (SD = 2.07) in Study 1
```{r}

```

mean rated warmth toward African Americans was 6.69 (SD = 2.06) in Study 1
```{r}

```

Mean conception risk was 0.03 (SD = 0.03) in Study 1
```{r}

```

## Inferential statistics

Correlations were computed between conception risk and each race variable, including the composite score. To best match the existing literature, we computed correla- tions for White women only (see the Supplemental Material for additional analyses).

Conception risk did not significantly correlate with any of the individual measures of racial bias (see Table S4 in the Supplemental Material) or with the composite score in Study 1, r = .00, 95% confidence interval (CI) = [−.09, .08]; 
```{r}

```

# Step 5: Conclusion

[Please include a text summary describing your findings. If this reproducibility check was a failure, you should note any suggestions as to what you think the likely cause(s) might be.]
  
[PILOT/COPILOT ENTER RELEVANT INFORMATION BELOW]

```{r}
Author_Assistance = FALSE # was author assistance provided? (if so, enter TRUE)

Insufficient_Information_Errors <- 0 # how many discrete insufficient information issues did you encounter?

# Assess the causal locus (discrete reproducibility issues) of any reproducibility errors. Note that there doesn't necessarily have to be a one-to-one correspondance between discrete reproducibility issues and reproducibility errors. For example, it could be that the original article neglects to mention that a Greenhouse-Geisser correct was applied to ANOVA outcomes. This might result in multiple reproducibility errors, but there is a single causal locus (discrete reproducibility issue).

locus_typo <- NA # how many discrete issues did you encounter that related to typographical errors?
locus_specification <- NA # how many discrete issues did you encounter that related to incomplete, incorrect, or unclear specification of the original analyses?
locus_analysis <- NA # how many discrete issues did you encounter that related to errors in the authors' original analyses?
locus_data <- NA # how many discrete issues did you encounter that related to errors in the data files shared by the authors?
locus_unidentified <- NA # how many discrete issues were there for which you could not identify the cause

Affects_Conclusion <- NA # Do any reproducibility issues encounter appear to affect the conclusions made in the original article? TRUE, FALSE, or NA. This is a subjective judgement, but you should taking into account multiple factors, such as the presence/absence of decision errors, the number of target outcomes that could not be reproduced, the type of outcomes that could or could not be reproduced, the difference in magnitude of effect sizes, and the predictions of the specific hypothesis under scrutiny.
```

[PILOT/COPILOT DOD NOT EDIT THE CODE CHUNK BELOW]

```{r}
reportObject <- reportObject %>%
  filter(dummyRow == FALSE) %>% # remove the dummy row
  select(-dummyRow) %>% # remove dummy row designation
  mutate(articleID = articleID) %>% # add variables to report 
  select(articleID, everything()) # make articleID first column

# decide on final outcome
if(any(reportObject$comparisonOutcome != "MATCH") | Insufficient_Information_Errors > 0){
  finalOutcome <- "Failure without author assistance"
  if(Author_Assistance == T){
    finalOutcome <- "Failure despite author assistance"
  }
}else{
  finalOutcome <- "Success without author assistance"
  if(Author_Assistance == T){
    finalOutcome <- "Success with author assistance"
  }
}

# collate report extra details
reportExtras <- data.frame(articleID, pilotNames, copilotNames, pilotTTC, copilotTTC, pilotStartDate, copilotStartDate, completionDate, Author_Assistance, finalOutcome, Insufficient_Information_Errors, locus_typo, locus_specification, locus_analysis, locus_data, locus_unidentified)

# save report objects
if(reportType == "pilot"){
  write_csv(reportObject, "pilotReportDetailed.csv")
  write_csv(reportExtras, "pilotReportExtras.csv")
}

if(reportType == "final"){
  write_csv(reportObject, "finalReportDetailed.csv")
  write_csv(reportExtras, "finalReportExtras.csv")
}
```

# Session information

[This function will output information about the package versions used in this report:]

```{r session_info, include=TRUE, echo=TRUE, results='markup'}
devtools::session_info()
```
